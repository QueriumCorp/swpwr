

let oldLog = "[{&quot;timestamp&quot;: &quot;2024-12-04T15:39:23.163Z&quot;, &quot;page&quot;: &quot;OwnWords&quot;, &quot;activity&quot;: &quot;changedValues&quot;, &quot;data&quot;: {&quot;value0&quot;: &quot;&quot;, &quot;value1&quot;: &quot;&quot;}}, {&quot;timestamp&quot;: &quot;2024-12-04T17:04:29.824Z&quot;, &quot;page&quot;: &quot;none&quot;, &quot;activity&quot;: &quot;initSession&quot;, &quot;data&quot;: {&quot;theProblem&quot;: {&quot;appKey&quot;: &quot;JiraTestPage&quot;, &quot;studentId&quot;: &quot;jim&quot;, &quot;id&quot;: &quot;Fall2024PS1Q1&quot;, &quot;title&quot;: &quot;SAMPLE&quot;, &quot;definition&quot;: &quot;SolveWordProblemAns[{`Pilar drove 7 miles from home to school. Then she drove 11 miles to her job. What is the total distance that Pilar drove?`}]&quot;, &quot;stimulus&quot;: &quot;Pilar drove 7 miles from home to school. Then she drove 11 miles to her job. What is the total distance that Pilar drove?&quot;, &quot;topic&quot;: &quot;gradeBasicAlgebra&quot;, &quot;hints&quot;: []}, &quot;response&quot;: {}, &quot;data&quot;: {&quot;status&quot;: &quot;200&quot;, &quot;sessionToken&quot;: &quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IkZhbGwyMDI0UFMxUTEiLCJzdHVkZW50SWQiOiJqaW0iLCJzZXJ2ZXJVcmwiOiJodHRwczovL3N0ZXB3aXNlYWkwMC5xdWVyaXVtLmNvbS93ZWJNYXRoZW1hdGljYS9hcGkvIiwic3RhcnRlZEF0IjoxNzMzMzMxODY0NDY2LCJpYXQiOjE3MzMzMzE4NjQsImV4cCI6MTczNDE5NTg2NH0.-e889Bjb1f2fcDoZVx15kchbkZ-XDRam6pRnm6YHU2E&quot;, &quot;identifiers&quot;: [&quot;T&quot;], &quot;operators&quot;: [&quot;Frac&quot;], &quot;explanation&quot;: [{&quot;type&quot;: &quot;schema&quot;, &quot;text&quot;: &quot;The total distance is more than each part. So 18 miles makes sense because it's greater than 7 miles and 11 miles.&quot;}, {&quot;type&quot;: &quot;bad&quot;, &quot;text&quot;: &quot;Pilar drove to two different places. So the total 18 miles makes sense.&quot;}, {&quot;type&quot;: &quot;estimation&quot;, &quot;text&quot;: &quot;Pilar drove about 10 miles to school. She drove about 10 miles to her job. So she drove about 10 + 10 = 20 miles in all. The answer 18 miles makes sense because it's close to 20 miles.&quot;}], &quot;endPhaseWEqn&quot;: &quot;T = 18&quot;, &quot;phaseESentence&quot;: &quot;Pilar drove a total of [VALUE] [UNIT].&quot;, &quot;highlights&quot;: [[&quot;7&quot;, &quot;miles&quot;], [&quot;11&quot;, &quot;miles&quot;], &quot;What is the total distance that Pilar drove?&quot;], &quot;fullURL&quot;: &quot;https://stepwiseai00.querium.com/webMathematica/api/?appKey=JiraTestPage&cmd=initializeSession&session=Fall2024PS1Q1%24jim%241733331864466&class=gradeBasicAlgebra&question=SolveWordProblemAns[%7B&quot;Pilar%20drove%207%20miles%20from%20home%20to%20school.%20Then%20she%20drove%2011%20miles%20to%20her%20job.%20What%20is%20the%20total%20distance%20that%20Pilar%20drove?&quot;%7D]&policies=$A9$&qs1=undefined&qs2=undefined&qs3=undefined&quot;, &quot;rawResponse&quot;: &quot;<result>{&quot;explanation&quot;:[{&quot;type&quot;:&quot;schema&quot;,&quot;text&quot;:&quot;The total distance is more than each part. So 18 miles makes sense because it&apos;s greater than 7 miles and 11 miles.&quot;},{&quot;type&quot;:&quot;estimation&quot;,&quot;text&quot;:&quot;Pilar drove about 10 miles to school. She drove about 10 miles to her job. So she drove about 10 + 10 = 20 miles in all. The answer 18 miles makes sense because it&apos;s close to 20 miles.&quot;},{&quot;type&quot;:&quot;bad&quot;,&quot;text&quot;:&quot;Pilar drove to two different places. So the total 18 miles makes sense.&quot;}],&quot;statefile&quot;:&quot;\/var\/lib\/tomcat8\/webapps\/webMathematica\/api\/states\/Fall2024PS1Q1xjimx1733331864466.mx&quot;,&quot;cmdResponse&quot;:&quot;reProcessLRV&quot;,&quot;feedback&quot;:&quot;Pilar drove 7 miles from home to school. Then she drove 11 miles to her job. What is the total distance that Pilar drove?&quot;,&quot;variables&quot;:[&quot;T&quot;],&quot;operators&quot;:[&quot;Frac&quot;],&quot;phaseESentence&quot;:&quot;Pilar drove a total of [VALUE] [UNIT].&quot;,&quot;endPhaseWEqn&quot;:&quot;T = 18&quot;,&quot;highlights&quot;:{&quot;highlight1&quot;:[&quot;7&quot;,&quot;miles&quot;],&quot;highlight2&quot;:[&quot;11&quot;,&quot;miles&quot;],&quot;highlight3&quot;:&quot;What is the total distance that Pilar drove?&quot;}}</result>&quot;, &quot;et&quot;: 5250}}}, {&quot;timestamp&quot;: &quot;2024-12-04T17:04:43.930Z&quot;, &quot;page&quot;: &quot;ReadProblem&quot;, &quot;activity&quot;: &quot;clickNext&quot;, &quot;data&quot;: {}}, {&quot;timestamp&quot;: &quot;2024-12-04T17:04:43.931Z&quot;, &quot;page&quot;: &quot;FindFacts&quot;, &quot;activity&quot;: &quot;ARRIVED&quot;, &quot;data&quot;: {}}, {&quot;timestamp&quot;: &quot;2024-12-04T17:04:50.496Z&quot;, &quot;page&quot;: &quot;FindFacts&quot;, &quot;activity&quot;: &quot;dndAddKnownFact&quot;, &quot;data&quot;: {&quot;fact&quot;: &quot;7 miles&quot;}}, {&quot;timestamp&quot;: &quot;2024-12-04T17:04:53.464Z&quot;, &quot;page&quot;: &quot;FindFacts&quot;, &quot;activity&quot;: &quot;dndAddKnownFact&quot;, &quot;data&quot;: {&quot;fact&quot;: &quot;11 miles&quot;}}]"

/* FULLURL
  The fullURL sent to qEval contains a question queryString that contains exactly two &quot;
  Replace them with &apos;
  Sample question queryString
  question=SolveWordProblemAns[%7B&quot;Pilar%20drove%207%20miles%20from%20home%20to%20school.%20Then%20she%20drove%2011%20miles%20to%20her%20job.%20What%20is%20the%20total%20distance%20that%20Pilar%20drove?&quot;%7D]
*/
let questionIndex = oldLog.indexOf("question=");

if (questionIndex !== -1) {
    // Find the substring starting from "question="
    let substringAfterQuestion = oldLog.substring(questionIndex);
    
    // Replace the first two "&quot;" with "&apos;"
    let modifiedSubstring = substringAfterQuestion.replace(/&quot;/g, (match, index, original) => {
        return index < original.indexOf('&quot;', original.indexOf('&quot;') + 1) + 6 ? "'" : match;
    });
    
    // Combine the parts
    oldLog = oldLog.substring(0, questionIndex) + modifiedSubstring;
}

/* REPLACE REMAINING &quot; CHARACTERS 
Replace all the remaining &quot; with the " character
*/
oldLog = oldLog.replace(/&quot;/g, '"')

/* RAWRESULTS
Within the rawResults <result></result> tag from qEval, replace the " with '
Sample rawResult
<result>{&quot;explanation&quot;:[{&quot;type&quot;:&quot;schema&quot;,&quot;text&quot;:&quot;The total distance is more than each part. So 18 miles makes sense because it&apos;s greater than 7 miles and 11 miles.&quot;},{&quot;type&quot;:&quot;estimation&quot;,&quot;text&quot;:&quot;Pilar drove about 10 miles to school. She drove about 10 miles to her job. So she drove about 10 + 10 = 20 miles in all. The answer 18 miles makes sense because it&apos;s close to 20 miles.&quot;},{&quot;type&quot;:&quot;bad&quot;,&quot;text&quot;:&quot;Pilar drove to two different places. So the total 18 miles makes sense.&quot;}],&quot;statefile&quot;:&quot;\/var\/lib\/tomcat8\/webapps\/webMathematica\/api\/states\/Fall2024PS1Q1xjimx1733331864466.mx&quot;,&quot;cmdResponse&quot;:&quot;reProcessLRV&quot;,&quot;feedback&quot;:&quot;Pilar drove 7 miles from home to school. Then she drove 11 miles to her job. What is the total distance that Pilar drove?&quot;,&quot;variables&quot;:[&quot;T&quot;],&quot;operators&quot;:[&quot;Frac&quot;],&quot;phaseESentence&quot;:&quot;Pilar drove a total of [VALUE] [UNIT].&quot;,&quot;endPhaseWEqn&quot;:&quot;T = 18&quot;,&quot;highlights&quot;:{&quot;highlight1&quot;:[&quot;7&quot;,&quot;miles&quot;],&quot;highlight2&quot;:[&quot;11&quot;,&quot;miles&quot;],&quot;highlight3&quot;:&quot;What is the total distance that Pilar drove?&quot;}}</result>
*/
oldLog = oldLog.replace(
  /(<result>)(.*?)(<\/result>)/gs,
  (match, p1, p2, p3) => {
    return p1 + p2.replace(/"/g, "'") + p3;
  }
);


let newLog = JSON.parse(oldLog)

console.log(JSON.stringify(newLog))
console.log("end")